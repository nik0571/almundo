var ENVIRONMENT="PRODUCTION",http=require("http"),path=require("path"),fs=require("fs"),Helpers=require("./server/helpers/helpers.js"),Messages=require("./server/lib/messages.js"),express=require("express"),app=express(),server=http.createServer(app);app.use(express.static("PRODUCTION"!==ENVIRONMENT?"./app/":"./dist/")).get("/*",function(e,s){s.sendFile(path.join(__dirname+"/index.html"))}).post("/api/getHotels",function(e,s){var r=JSON.parse(fs.readFileSync("server/models/data.json")),a=r;(Helpers.emptyDatas(e.query.score)||void 0!==e.query.name&&""!==e.query.name)&&(a=[],r.forEach(function(s,r){var t=!1,p=!1;void 0!==e.query.name&&""!==e.query.name&&(t=new RegExp(".*"+Helpers.slugify(e.query.name)+".*","ig").test(Helpers.slugify(s.name))),Helpers.emptyDatas(e.query.score)&&(p=-1!=e.query.score.indexOf(s.stars)||-1!=e.query.score.indexOf(s.stars.toString())),(t||p)&&a.push(s)})),s.send({data:a,msj:a.length>0?Messages.global.success.loadHotels:Messages.global.errors.loadHotels,event:a.length>0,query:e.query})}),server.listen(process.env.PORT||3e3,process.env.IP||"127.0.0.1",function(){var e=server.address();console.log("Server listening at",e.address+":"+e.port)});